## Bots 

## what bot exactly is? 
An Internet bot, web robot, robot or simply bot, is a software application that runs automated tasks (scripts) over the Internet, usually with the intent to imitate human activity on the Internet, such as messaging, on a large scale. <br>
An Internet bot plays the client role in a client–server model whereas the server role is usually played by web servers. Internet bots are able to perform tasks, that are simple and repetitive, much faster than a person could ever do. The most extensive use of bots is for web crawling, in which an automated script fetches, analyzes and files information from web servers. More than half of all web traffic is generated by bots. <br>
Bots can be: <br>
- Chatbots: Bots that simulate human conversation by responding to certain phrases with programmed responses
- Web crawlers (Googlebots): Bots that scan content on webpages all over the Internet
- Social bots: Bots that operate on social media platforms
- Malicious bots: Bots that scrape content, spread spam content, or carry out credential stuffing attacks
<br>
Schedule bot is a type of chat bot<br>


## Deployment
Polling vs Webhooks

1. Polling deployment
<pre>
______________                                   _____________
|            |                                   |           |
|            |   <--- are there messages? ---    |           |
|            |    ---       nope.         --->   |           |
|            |                                   |           |
|            |   <--- are there messages? ---    |           |
|  Telegram  |    ---       nope.         --->   |    Bot    |
|            |                                   |           |
|            |   <--- are there messages? ---    |           |
|            |    ---  yes, here you go   --->   |           |
|            |                                   |           |
|____________|                                   |___________|
</pre>

Polling means that bot proactively sends a request to Telegram, asking for new updates (think: messages). If no messages are there, Telegram will return an empty list, indicating that no new messages were sent to your bot since the last time you asked.

When bot sends a request to Telegram and new messages have been sent to your bot in the meantime, Telegram will return them as an array of up to 100 update objects.
<br>

Long polling
<pre>
______________                                   _____________
|            |                                   |           |
|            |   <--- are there messages? ---    |           |
|            |   .                               |           |
|            |   .                               |           |
|            |   .     *both waiting*            |           |
|  Telegram  |   .                               |    Bot    |
|            |   .                               |           |
|            |   .                               |           |
|            |    ---  yes, here you go   --->   |           |
|            |                                   |           |
|____________|                                   |___________|
</pre>
Note that in reality, no connection would be kept open for hours. Long polling requests have a default timeout of 30 seconds. If no new messages are returned after this period of time, then the request will be cancelled and resent—but the general concept stays the same.
<br>
2. Webhooks
What are webhooks, and why should you be using them? A webhook is a way to deliver real-time data to applications. Unlike traditional APIs where you need to poll for data frequently in order to get quasi real-time information, webhooks send data immediately.
<pre>
______________                                   _____________
|            |                                   |           |
|            |                                   |           |
|            |                                   |           |
|            |         *both waiting*            |           |
|            |                                   |           |
|  Telegram  |                                   |    Bot    |
|            |                                   |           |
|            |                                   |           |
|            |    ---  hi, new message   --->    |           |
|            |   <---    thanks dude     ---     |           |
|____________|                                   |___________|
</pre>

3. Comparison
The main advantage of long polling over webhooks is that it is simpler. You don’t need a domain or a public URL. You don’t need to fiddle around with setting up SSL certificates in case you’re running your bot on a VPS.<br>
Places where long polling works well include:<br>
- During development on your local machine.
- On the majority of servers.
- On hosted “backend” instances, i.e. machines that actively run your bot 24/7.
<br>
The main advantage of webhooks over long polling is that they are cheaper. You save a ton of superfluous requests. You don’t need to keep a network connection open at all times. You can use services that automatically scale your infrastructure down to zero when no requests are coming.<br>
Places where webhooks work well include:<br>
- On servers with SSL certificates.
- On serverless platforms, such as cloud functions or programmable edge networks.
<br>
Webhooks have two components: the outbound side (sender) and the inbound side (recipient). The recipient is responsible for specifying the callback URI so that the sender knows where to send the asynchronous request.
<br>
The outbound side is typically associated with some sort of stimulus event that gets triggered in the server code. This could be an event such as a status change on an object like assigning a pull request, or the completion of a process like publishing a release. Think of it as subscribe and notify model where the subscription may be long lasting, or transient – created and expired for the duration of a single stimulus request.
The inbound side of a webhook is the location or URI that the webhook is sent to. Recipients are expecting to receive webhooks and will take some form of action based on the contents of the received message. Hence, recipients of a webhook require setup and configuration to receive and handle the inbound request.



## Different python libraries
1) <a href='https://github.com/python-telegram-bot/python-telegram-bot'>python-telegram-bot</a>
2) <a href='https://github.com/eternnoir/pyTelegramBotAPI'>pytelegrambotAPI</a>
3) <a href='https://github.com/aiogram/aiogram'>aiogram</a>



## Resources
- https://gist.github.com/michellini/a05f3068f29107caab88
- https://grammy.dev/guide/deployment-types.html#how-does-long-polling-work 
- https://en.wikipedia.org/wiki/Internet_bot